import { ADD_NEW_ITEM, AdData, CHANGE_ITEM, DELETE_ITEM, GET_TEST_DATA, TResultData, testDataDispatchTypes } from "../../actions/testdata/types"

const testdata = '{"result":{"Ads":[{"AdCategories":null,"AdGroupId":4449414,"AgeLabel":null,"CampaignId":446939,"Id":3795919,"State":"ON","Status":"ACCEPTED","StatusClarification":"Campaign is in progress.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 1 text","Title":"Test sandbox banner 1","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305775,"VCardModeration":{"Status":"ACCEPTED","StatusClarification":"Contact information accepted at moderation."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449415,"AgeLabel":null,"CampaignId":446939,"Id":3795920,"State":"ON","Status":"ACCEPTED","StatusClarification":"Campaign is in progress.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 2 text","Title":"Test sandbox banner 2","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305775,"VCardModeration":{"Status":"ACCEPTED","StatusClarification":"Contact information accepted at moderation."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449416,"AgeLabel":null,"CampaignId":446939,"Id":3795921,"State":"ON","Status":"ACCEPTED","StatusClarification":"Campaign is in progress.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 3 text","Title":"Test sandbox banner 3","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305775,"VCardModeration":{"Status":"ACCEPTED","StatusClarification":"Contact information accepted at moderation."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449417,"AgeLabel":null,"CampaignId":446939,"Id":3795922,"State":"ON","Status":"ACCEPTED","StatusClarification":"Campaign is in progress.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 4 text","Title":"Test sandbox banner 4","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305775,"VCardModeration":{"Status":"ACCEPTED","StatusClarification":"Contact information accepted at moderation."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449418,"AgeLabel":null,"CampaignId":446939,"Id":3795923,"State":"ON","Status":"ACCEPTED","StatusClarification":"Campaign is in progress.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 5 text","Title":"Test sandbox banner 5","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305775,"VCardModeration":{"Status":"ACCEPTED","StatusClarification":"Contact information accepted at moderation."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449419,"AgeLabel":null,"CampaignId":446940,"Id":3795924,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 1 text","Title":"Test sandbox banner 1","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305776,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449420,"AgeLabel":null,"CampaignId":446940,"Id":3795925,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 2 text","Title":"Test sandbox banner 2","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305776,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449421,"AgeLabel":null,"CampaignId":446940,"Id":3795926,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 3 text","Title":"Test sandbox banner 3","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305776,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449422,"AgeLabel":null,"CampaignId":446940,"Id":3795927,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 4 text","Title":"Test sandbox banner 4","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305776,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449423,"AgeLabel":null,"CampaignId":446940,"Id":3795928,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 5 text","Title":"Test sandbox banner 5","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305776,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449424,"AgeLabel":null,"CampaignId":446941,"Id":3795929,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 1 text","Title":"Test sandbox banner 1","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305777,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449425,"AgeLabel":null,"CampaignId":446941,"Id":3795930,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 2 text","Title":"Test sandbox banner 2","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305777,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449426,"AgeLabel":null,"CampaignId":446941,"Id":3795931,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 3 text","Title":"Test sandbox banner 3","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305777,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449427,"AgeLabel":null,"CampaignId":446941,"Id":3795932,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 4 text","Title":"Test sandbox banner 4","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305777,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"},{"AdCategories":null,"AdGroupId":4449428,"AgeLabel":null,"CampaignId":446941,"Id":3795933,"State":"OFF","Status":"DRAFT","StatusClarification":"Draft.","Subtype":"NONE","TextAd":{"AdExtensions":[],"AdImageHash":null,"AdImageModeration":null,"BusinessId":null,"DisplayDomain":"www.yandex.ru","DisplayUrlPath":null,"DisplayUrlPathModeration":null,"Href":"http://www.yandex.ru","Mobile":"NO","SitelinkSetId":null,"SitelinksModeration":null,"Text":"Test sandbox banner 5 text","Title":"Test sandbox banner 5","Title2":null,"TurboPageId":null,"TurboPageModeration":null,"VCardId":305777,"VCardModeration":{"Status":"DRAFT","StatusClarification":"Draft."},"VideoExtension":null},"Type":"TEXT_AD"}]}}'

export const parsedTestData: TResultData = JSON.parse(testdata)

interface IDefaultState {
    data: AdData[]
}

const defaultState: IDefaultState = {
    data: parsedTestData.result.Ads
}

const testDataReducer = (state: IDefaultState = defaultState, action: testDataDispatchTypes) => {
    switch (action.type) {
        case GET_TEST_DATA:
            return {
                ...state,
                data: parsedTestData.result.Ads
            }

        case ADD_NEW_ITEM:
            return {
                ...state,
                data: [action.payload, ...state.data]
            }

        case CHANGE_ITEM:
            return {
                ...state,
                data: [...state.data.map(el => {
                    if (el.Id === action.payload.Id) {
                        return {
                            ...el,
                            State: action.payload.State,
                            TextAd: {
                                ...el.TextAd,
                                Title: action.payload.TextAd.Title
                            }
                        }
                    }
                    return el
                })]
            }

        case DELETE_ITEM:
            return {
                ...state,
                data: [...state.data.filter(el => el.Id !== action.payload)]
            }

        default:
            return state
    }
}

export default testDataReducer